<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ news.Title }} - Financial News Sentiment</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        .sentiment-gradient {
            background: linear-gradient(to right, 
                rgba(239, 68, 68, 0.9) 0%, 
                rgba(156, 163, 175, 0.9) 50%, 
                rgba(16, 185, 129, 0.9) 100%);
            height: 10px;
            border-radius: 5px;
            position: relative;
        }
        .sentiment-marker {
            position: absolute;
            height: 20px;
            width: 4px;
            background-color: #1F2937;
            top: -5px;
            transform: translateX(-50%);
        }
        .sentiment-positive {
            background: linear-gradient(135deg, #d4ffda, #9fff94);
            border-left: 5px solid #10B981;
        }
        .sentiment-neutral {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            border-left: 5px solid #9CA3AF;
        }
        .sentiment-negative {
            background: linear-gradient(135deg, #ffdddd, #ffb0b0);
            border-left: 5px solid #EF4444;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <nav class="mb-6">
            <a href="/" class="text-blue-600 hover:text-blue-800">
                <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
            </a>
        </nav>

        <div class="bg-white rounded-lg shadow-xl overflow-hidden">
            <!-- Header -->
            <div class="p-6 
                {% if news.Sentiment == 'Positive' %}sentiment-positive
                {% elif news.Sentiment == 'Negative' %}sentiment-negative
                {% else %}sentiment-neutral
                {% endif %}">
                <div class="flex justify-between items-start">
                    <div>
                        <span class="text-sm font-medium bg-white bg-opacity-75 px-3 py-1 rounded-full">
                            {{ news.Source }}
                        </span>
                        <span class="text-sm text-gray-600 ml-2">{{ news.Date }}</span>
                    </div>
                    <div>
                        {% if news.Sentiment == 'Positive' %}
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">
                                <i class="fas fa-arrow-up mr-1"></i>Positive
                            </span>
                        {% elif news.Sentiment == 'Negative' %}
                            <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">
                                <i class="fas fa-arrow-down mr-1"></i>Negative
                            </span>
                        {% else %}
                            <span class="bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-semibold">
                                <i class="fas fa-minus mr-1"></i>Neutral
                            </span>
                        {% endif %}
                    </div>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mt-4">{{ news.Title }}</h1>
            </div>

            <!-- Content -->
            <div class="p-6">
                <!-- Sentiment Analysis -->
                <div class="mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Sentiment Analysis</h2>
                    
                    <!-- Sentiment Score -->
                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-gray-700 font-medium">Sentiment Score:</span>
                            <div class="flex space-x-4">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 rounded-full bg-green-500 mr-1"></div>
                                    <span>Positive: {{ "%.1f"|format(news.Positive_Score * 100) }}%</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 rounded-full bg-gray-400 mr-1"></div>
                                    <span>Neutral: {{ "%.1f"|format(news.Neutral_Score * 100) }}%</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 rounded-full bg-red-500 mr-1"></div>
                                    <span>Negative: {{ "%.1f"|format(news.Negative_Score * 100) }}%</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sentiment Visualization -->
                        <div class="flex w-full h-4 bg-gray-200 rounded-full overflow-hidden mb-4">
                            <div class="h-full bg-red-500" style="width: {{ news.Negative_Score * 100 }}%"></div>
                            <div class="h-full bg-gray-400" style="width: {{ news.Neutral_Score * 100 }}%"></div>
                            <div class="h-full bg-green-500" style="width: {{ news.Positive_Score * 100 }}%"></div>
                        </div>
                        
                        <!-- Sentiment Meter -->
                        <div class="mt-4">
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Bearish</span>
                                <span>Neutral</span>
                                <span>Bullish</span>
                            </div>
                            <div class="sentiment-gradient">
                                {% set sentiment_position = (news.Positive_Score - news.Negative_Score + 1) / 2 * 100 %}
                                <div class="sentiment-marker" style="left: {{ sentiment_position }}%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sentiment Charts -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-4 rounded-lg shadow">
                            <h3 class="text-lg font-medium text-gray-800 mb-4">Sentiment Breakdown</h3>
                            <div class="h-64">
                                <canvas id="sentimentPieChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow">
                            <h3 class="text-lg font-medium text-gray-800 mb-4">Sentiment Impact</h3>
                            <div class="h-64">
                                <canvas id="sentimentBarChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- News Content -->
                <div class="mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">News Content</h2>
                    <p class="text-gray-700 leading-relaxed">{{ news.Description }}</p>
                    
                    {% if news.Url %}
                    <div class="mt-4">
                        <a href="{{ news.Url }}" target="_blank" class="inline-flex items-center text-blue-600 hover:text-blue-800">
                            Read full article 
                            <i class="fas fa-external-link-alt ml-1"></i>
                        </a>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Market Impact (Hypothetical) -->
                <div>
                    <h2 class="text-xl font-bold text-gray-800 mb-4">Potential Market Impact</h2>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        {% if news.Sentiment == 'Positive' %}
                            <div class="flex items-start">
                                <div class="bg-green-100 p-2 rounded-full">
                                    <i class="fas fa-chart-line text-green-600"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-medium text-gray-800">Likely Positive Impact</h3>
                                    <p class="text-gray-600 mt-1">This news appears to have a positive sentiment and could potentially boost investor confidence in related markets or stocks.</p>
                                </div>
                            </div>
                        {% elif news.Sentiment == 'Negative' %}
                            <div class="flex items-start">
                                <div class="bg-red-100 p-2 rounded-full">
                                    <i class="fas fa-chart-line-down text-red-600"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-medium text-gray-800">Likely Negative Impact</h3>
                                    <p class="text-gray-600 mt-1">This news appears to have a negative sentiment and might negatively affect investor confidence in related markets or stocks.</p>
                                </div>
                            </div>
                        {% else %}
                            <div class="flex items-start">
                                <div class="bg-gray-200 p-2 rounded-full">
                                    <i class="fas fa-balance-scale text-gray-600"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-medium text-gray-800">